<style>
    .mono {
        font-family: monospace;
    }
    .mono2 {
        font-size: 1em;
    }

</style>
<div class='remove_p_space' class='t_0' style='line-height: 1; margin-top: 20px;'>
    <p class='t_1' style='font-weight: bold;'>ASM Hell</p>
    <p class='t_0' tyle='font-size: 1em; margin-top: 5px;'>User documentation, version 5.9.12(8)-release (x64-torus)</p>
    <p class='t_0' style='font-size: 1em; font-style: italic; line-height: 1.1; margin-top: 10px;'>Dedicated to the one always dissatisfied with my typesetting skills. Your comments have been a test to my patience and self-control.</p>
    <p class='t_0' style='margin-top: 0.9em;'>ASM Hell defines instruction set with three types of arguments: immediate value <span class='mono'>I</span>, memory value <span class='mono'>M</span>,  any value <span class='mono'>A</span>. Example: <span class='mono'>7</span> is an immediate value, <span class='mono'>[4]</span> is a memory value, <span class='mono'>[[2]]</span> is a pointer to <span class='mono'>[2]th</span> memory bank (<span class='mono'>[2]</span> must be between 0 - 7, otherwise an error is thrown)</p>
    
    <p class='t_0' style='font-weight: bold; font-size: 1.5em; margin-top: 15px;'>Bugs:</p>
    <p class='t_0' style='margin-top: 0.9em;'>To everyone's great surprise, this game contains bugs. It's mostly input processing.</p>
    
    <p class='t_0' style='font-weight: bold; font-size: 1.5em; margin-top: 15px;'>Commands:</p>
    <table style='font-family: monospace; margin-top: 10px;'>
            <tr>
                <td style='width: 150px;'>Command</td>
                <td>Description</td>
            </tr>
            <tr>
                <td>MOVE A1 A2</td>
                <td>A1 is the amount of steps (can be negative), A2 is the direction (0 for vertical, 1 for horizontal)</td>
            </tr>
            <tr>
                <td>WAIT A1</td>
                <td>A1 is the amount of cycles to wait</td>
            </tr>
            <tr>
                <td>UNLOCK A1</td>
                <td>A1 is the key</td>
            </tr>
            <tr>
                <td>READ M1</td>
                <td>M1 stores the result of tile read instruction</td>
            </tr>
            <tr>
                <td>ADD M1 A1 A2</td>
                <td>M1 stores the result of A1 + A2</td>
            </tr>
            <tr>
                <td>SUB M1 A1 A2</td>
                <td>M1 stores the result of A1 - A2</td>
            </tr>
            <tr>
                <td>MUL M1 A1 A2</td>
                <td>M1 stores the result of A1 * A2</td>
            </tr>
            <tr>
                <td>JMP A1</td>
                <td>A1 line in code to be jumped to</td>
            </tr>
            <tr>
                <td>JMPZ A1 A2</td>
                <td>jump to line A1 if A2 is zero</td>
            </tr>
            <tr>
                <td>JMPN A1 A2</td>
                <td>jump to line A1 if A2 is negative</td>
            </tr>
            <tr>
                <td>CMP M1 A1 A2</td>
                <td>M1 stores the result of A1 &gt; A2 (B); A1 > A2: 1, A1 = A2: 0, A1 &lt; A2: -1</td>
            </tr>
            <tr>
                <td></td>
                <td></td>
            </tr>
    </table>

    <p class='t_0' style='font-weight: bold; font-size: 1.5em; margin-top: 15px; margin-bottom: 10px;'>Solutions:</p>
    <p class='t_0' style='font-size: 1em; display: inline;'>Normally, this would be considered cheating, but hey, I know some puzzles are not easy and that I flunked the tutorial part.</p> <p class='t_0' id='show_me_but' style='font-weight: bold; cursor: pointer; display: inline-block;' onmouseover="" onclick='document.getElementById("show_me_but").style.display="none"; document.getElementById("solution_div").style.display="block"; '>Show me!</p>
<div id='solution_div' style='display:none;'>
    <p class='t_0' style='font-weight: bold; font-size: 1.1em; margin-top: 10px;'>Layer 0:</p>
    <pre class='mono2'>
MOVE 4 0
MOVE 5 1
    </pre>
    <p class='t_0' style='font-size: 1em;'>Move 4 up, then 5 right.</p>
<p class='t_0' style='font-weight: bold; font-size: 1.1em; margin-top: 10px;'>Layer 1:</p>
    <pre class='mono2'>
MOVE 21 1
MOVE 4 0 
MOVE -1 1 
MOVE 2 0 
MOVE 1 1 
MOVE 8 0 
MOVE -12 1
MOVE -4 0 
MOVE -1 1 
MOVE -2 0 
MOVE 3 1 
MOVE -4 0 
MOVE 2 1 
MOVE 1 0
    </pre>
    <p class='t_0' style='font-size: 1em;'>Simply navigate through the maze.</p>
    <p class='t_0' style='font-weight: bold; font-size: 1.1em; margin-top: 10px;'>Layer 2:</p>
    <pre class='mono2'>
MOVE 1 0 
MOVE 11 1 
MOVE -1 0  
READ [5] 
MOVE 3 0 
UNLOCK [5] 
MOVE 3 0
    </pre>
    <p class='t_0' style='font-size: 1em;'>Move to tile containing the code, read it (to register 5), then move down to the door and open it.</p>
    <p class='t_0' style='font-weight: bold; font-size: 1.1em; margin-top: 10px;'>Layer 3:</p>
    <pre class='mono2'>
MOVE 2 0 
MOVE 1 1 
READ [0] 
MOVE -2 1 
READ [1] 
MOVE 1 1 
ADD [2] [0] [1] 
SUB [3] [1] [0] 
MUL [4] [0] [1] 
UNLOCK [2] 
MOVE 4 0 
UNLOCK [3] 
MOVE 4 0 
UNLOCK [4] 
MOVE 4 0 
    </pre>
    <p class='t_0' style='font-size: 1em;'>Load both operands to registers 0 and 1. Do addition, substraction and multiplication into registers 2, 3, 4, respectivelly, then open doors.</p>
    <p class='t_0' style='font-weight: bold; font-size: 1.1em; margin-top: 10px;'>Layer 4:</p>
    <pre class='mono2'>
MOVE -3 1 
MOVE 2 0 
MOVE 3 1 
MOVE 2 0
JMP 1 
    </pre>
    <p class='t_0' style='font-size: 1em;'>First four lines indicate a segment, that repeats multiple times. JMP to reuse.</p>
    <p class='t_0' style='font-weight: bold; font-size: 1.1em; margin-top: 10px;'>Layer 5:</p>
    <pre class='mono2'>
MOVE -4 1 
READ [0] 
MUL [0] [0] -2 
MOVE [0] 0 
MOVE 99 1
    </pre>
    <p class='t_0' style='font-size: 1em;'>Load index to the first register, then multiply by two to get the desired amount of steps. We also need to change the direction (upwards), hence -1. Then go right by 99 steps.</p>
    <p class='t_0' style='font-weight: bold; font-size: 1.1em; margin-top: 10px;'>Layer 6:</p>
    <pre class='mono2'>
MOVE 6 0 
READ [0] 
SUB [0] [0] 47 
JMPZ 7 [0]
MOVE 7 1 
MOVE 99 0 
MOVE -7 1 
MOVE 99 0 
    </pre>
    <p class='t_0' style='font-size: 1em;'>Load value, then substract 47. Now we have to decide based on whether it's 0 or 1. If 0, then jump to the rest of the program (go left). This skips the 'go right' part.</p>
    <p class='t_0' style='font-weight: bold; font-size: 1.1em; margin-top: 10px;'>Layer 7:</p>
    <pre class='mono2'>
MOVE -6 1 
READ [0] 
MOVE 12 1 
READ [2] 
MOVE -6 1 
MOVE -6 0  
READ [1] 
MOVE 8 0 
SUB [2] [0] [2] 
MUL [2] [2] [2] 
MUL [2] [2] [1] 
MUL [0] [0] 2 
ADD [0] [0] [2] 
MUL [0] [0] 2 
ADD [0] [0] 3 
UNLOCK [0] 
MOVE 4 0 
    </pre>
    <p class='t_0' style='font-size: 1em;'>Load values a, b, c and do bunch of arithmetic operations.</p>
    <p class='t_0' style='font-weight: bold; font-size: 1.1em; margin-top: 10px;'>Layer 8:</p>
    <pre class='mono2'>
MOVE 5 0 
MOVE -2 1 
READ [0] 
MOVE 4 1 
READ [1] 
MOVE -2 1 

CMP [2] [0] [1] 
ADD [3] [3] 1 
SUB [0] [0] [1] 
JMPZ 14 [2] 
JMP 8 
    
UNLOCK [3] 
MOVE 5 0  
    </pre>
    <p class='t_0' style='font-size: 1em;'>Load values and then substract from a as much as possible without it getting to zero.</p>
    <p class='t_0' style='font-weight: bold; font-size: 1.1em; margin-top: 10px;'>Layer 9:</p>
    <pre class='mono2'>
MOVE 2 0 
ADD [6] 0 4
JMP 15 
MOVE 3 0 
MOVE 2 1 
ADD [6] 0 8 
JMP 15 
MOVE 2 0 
ADD [6] 0 11 
JMP 15 
MOVE 2 0 
    
    
    
READ [0] 
MUL [1] [0] [0] 
MUL [1] [1] 2 
MUL [2] [0] -3 
ADD [1] [2] [1] 
ADD [1] [1] 7 
UNLOCK [1] 
JMP [6] 
    </pre>
    <p class='t_0' style='font-size: 1em;'>First we write a function, that reads a current tile, then computes an expression, unlocks the door and returns to line stored in the 6th register. Then we call this function by storing in the 6th register and jumping to the 15th line.</p>
    <p class='t_0' style='font-weight: bold; font-size: 1.1em; margin-top: 10px;'>Layer 10:</p>
    <pre class='mono2'>
MOVE 2 1 
MOVE 1 0 
READ [0] 
MOVE 1 1 
READ [1] 
MOVE 1 1 
READ [2] 
MOVE 1 1 
READ [3] 
MOVE -1 0 
MOVE 4 1 
MOVE 1 0 
READ [4] 
MOVE 2 1 
READ [5] 
MOVE -1 0 
MOVE 1 1 
READ [6] 
UNLOCK [[6]] 
MOVE 4 1 
    </pre>
    <p class='t_0' style='font-size: 1em;'>Load all values and then use double dereferencing to get the correct one.</p>
    <p class='t_0' style='font-weight: bold; font-size: 1.1em; margin-top: 10px;'>Layer 11:</p>
    <pre class='mono2'>
MOVE 99 1 
MUL [0] [7] -1 
ADD [1] [7] 0 
MOVE [0] 1 
UNLOCK [1] 
MOVE -2 0 
    </pre>
    <p class='t_0' style='font-size: 1em;'>Move right as far as possible, calculate the amount of steps in the opposite direction, save previous result, walk, then unlock door.</p>
    <p class='t_0' style='font-weight: bold; font-size: 1.1em; margin-top: 10px;'>Layer 12:</p>
    <pre class='mono2'>
MOVE 1 0 

READ [1] 
READ [2] 
SUB [1] [1] 1 
SUB [2] [1] 1 
JMPZ 11 [2] 
JMP 14 
    
    
MOVE 1 1 
MOVE -1 1 
    
READ [4] 
JMPZ 12 [4] 
JMPN 5 [4] 
SUB [4] [4] [1] 
JMP 15
    </pre>
    <p class='t_0' style='font-size: 1em;'>The most straightforward way is to check divisibility by all numbers (y) in the interval 2..x-1. y is iterated in the first segment. If it reaches 1, then we know that the examined number is prime (hence jump to 11). Otherwise jump to 14, that is check if repeated substraction leads to 0 or a negative number. If zero, then x is a composite number, if negative number, continue in previous cycle. Multiple read commands may seem confusing, but bear in mind, that you are standing on x tile.</p>
</div>
    <!--//CRIT TODO: -1 on read, unlock. Move stores steps in [7]
    //CRIT TODO: link to author solutions-->
</div>
